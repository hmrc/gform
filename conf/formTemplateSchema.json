{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "gForm form config schema",
  "description": "Validation of any form posted to gForm platform",
  "type": "object",
  "patternProperties": {
    "^(comment)": {
      "$ref": "#/$defs/stringOrEnCyObject"
    },
    "^(_)": {
      "type": [
        "array",
        "boolean",
        "number",
        "object",
        "string"
      ]
    }
  },
  "additionalProperties": false,
  "properties": {
    "_id": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9-]+$"
    },
    "formName": {
      "$ref": "#/$defs/stringOrEnCyObject"
    },
    "description": {
      "$ref": "#/$defs/stringOrEnCyObject"
    },
    "formCategory": {
      "type": "string",
      "pattern": "^(hmrcClaimForm|hmrcReturnForm)$"
    },
    "version": {
      "type": "integer"
    },
    "developmentPhase": {
      "type": "string",
      "pattern": "^(alpha|research|live)$"
    },
    "allowedFileTypes": {
      "type": "array"
    },
    "fileSizeLimit": {
      "type": "integer"
    },
    "displayHMRCLogo": {
      "description": "Defines whether the HMRC logo is displayed",
      "type": "boolean"
    },
    "displayWidth": {
      "type": "string",
      "pattern": "^(m|l|xl)$"
    },
    "userResearchUrl": {
      "type": "string"
    },
    "accessibilityUrl": {
      "type": "string"
    },
    "serviceStartPageUrl": {
      "type": "string"
    },
    "accessiblePdf": {
      "type": "boolean"
    },
    "downloadPreviousSubmissionPdf": {
      "type": "boolean"
    },
    "languages": {
      "type": "array"
    },
    "exitPages": {
      "type": "array"
    },
    "draftRetrievalMethod": {
      "type": "string",
      "pattern": "^(formAccessCodeForAgents|notPermitted|onePerUser)$"
    },
    "draftRetrieval": {
      "$ref": "#/$defs/draftRetrievalObject"
    },
    "showContinueOrDeletePage": {
      "type": "boolean"
    },
    "save4LaterInfoText": {
      "$ref": "#/$defs/stringOrEnCyObject"
    },
    "note": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "array"
        }
      ]
    },
    "doneNote": {
      "type": "array"
    },
    "emailTemplateId": {
      "$ref": "#/$defs/stringOrEnCyObject"
    },
    "emailParameters": {
      "type": "array",
      "additionalProperties": false,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "value": {
            "type": "string"
          },
          "emailTemplateVariable": {
            "type": "string"
          }
        }
      }
    },
    "emailCodeParameters": {
      "type": "array",
      "additionalProperties": false,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "value": {
            "$ref": "#/$defs/stringOrEnCyObject"
          },
          "emailTemplateVariable": {
            "type": "string"
          }
        }
      }
    },
    "expressions": {
      "type": "object",
      "patternProperties": {
        "^.*$": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "object"
            }
          ],
          "additionalProperties": false,
          "properties": {
            "value": {
              "type": "string"
            },
            "type": {
              "type": "string"
            },
            "fractionalDigits": {
              "type": "integer"
            },
            "round": {
              "type": "string",
              "pattern": "^(Up|Down|HalfUp|HalfDown)$"
            }
          }
        }
      }
    },
    "expressionsOutput": {
      "type": "array"
    },
    "booleanExpressions": {
      "type": "object"
    },
    "legacyFormIds": {
      "type": "array"
    },
    "dataRetrieve": {
      "$ref": "#/$defs/dataRetrieveArray"
    },
    "displayAccountHeader": {
      "description": "Defines whether the PTA Menu is displayed in the header",
      "type": "boolean"
    },
    "referrerConfig": {
      "type": "object",
      "properties": {
        "allowedReferrerUrls": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "title": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "exitMessage": {
          "$ref": "#/$defs/stringOrEnCyObject"
        }
      },
      "additionalProperties": false,
      "required": [
        "allowedReferrerUrls",
        "exitMessage"
      ]
    },
    "authConfig": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "authModule": {
          "type": "string",
          "pattern": "^(hmrc|anonymous|composite|hmrcAny|hmrcVerified)$"
        },
        "configs": {
          "type": "array"
        },
        "agentAccess": {
          "type": "string"
        },
        "enrolmentCheck": {
          "type": "string"
        },
        "serviceId": {
          "type": "string"
        },
        "regimeId": {
          "type": "string"
        },
        "legacyFcEnrolmentVerifier": {
          "type": "string"
        },
        "enrolmentOutcomes": {
          "type": "object"
        },
        "enrolmentSection": {
          "type": "object"
        },
        "ivFailure": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "minimumCL": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "allowOrganisations": {
          "type": "boolean"
        },
        "allowSAIndividuals": {
          "type": "boolean"
        }
      }
    },
    "sections": {
      "type": "array",
      "additionalProperties": false,
      "items": {
        "$ref": "#/$defs/sections"
      }
    },
    "submitSection": {
      "type": "object"
    },
    "printSection": {
      "type": "object"
    },
    "summarySection": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "title",
        "header",
        "footer"
      ],
      "properties": {
        "title": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "header": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "footer": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "displayWidth": {
          "type": "string",
          "pattern": "^(m|l|xl)$"
        },
        "keyDisplayWidth": {
          "type": "string",
          "pattern": "^(s|m|l)$"
        },
        "continueLabel": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "pdf": {
          "type": "object"
        },
        "note": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array"
            }
          ]
        },
        "doneNote": {
          "type": "array"
        },
        "fields": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/fields"
          }
        }
      }
    },
    "declarationSection": {
      "type": "object",
      "properties": {
        "title": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "shortName": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "continueLabel": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "includeIf": {
          "type": "string"
        },
        "fields": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/fields"
          }
        }
      },
      "required": [
        "title",
        "fields"
      ],
      "additionalProperties": false
    },
    "acknowledgementSection": {
      "type": "object",
      "properties": {
        "title": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "showReference": {
          "type": "boolean"
        },
        "showBanner": {
          "type": "boolean"
        },
        "note": {
          "type": [
            "string",
            "array"
          ]
        },
        "doneNote": {
          "type": "array"
        },
        "instructionPdf": {
          "type": "object",
          "properties": {
            "header": {
              "$ref": "#/$defs/stringOrEnCyObject"
            },
            "footer": {
              "$ref": "#/$defs/stringOrEnCyObject"
            }
          },
          "required": [
            "header"
          ],
          "additionalProperties": false
        },
        "pdf": {
          "type": "object",
          "properties": {
            "header": {
              "$ref": "#/$defs/stringOrEnCyObject"
            },
            "footer": {
              "$ref": "#/$defs/stringOrEnCyObject"
            },
            "tabularFormat": {
              "type": "boolean"
            },
            "includeSignatureBox": {
              "type": "boolean"
            }
          },
          "required": [
            "header"
          ],
          "additionalProperties": false
        },
        "fields": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/fields"
          }
        },
        "noPIITitle": {
          "$ref": "#/$defs/stringOrEnCyObject"
        }
      },
      "required": [
        "fields"
      ],
      "additionalProperties": false
    },
    "destinations": {
      "type": "array"
    }
  },
  "required": [
    "_id",
    "formName",
    "description",
    "version"
  ],
  "$defs": {
    "sections": {
      "type": "object",
      "patternProperties": {
        "^(comment)": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "^(_)": {
          "type": [
            "array",
            "boolean",
            "number",
            "object",
            "string"
          ]
        }
      },
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string"
        },
        "caption": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "displayWidth": {
          "type": "string",
          "pattern": "^(m|l|xl)$"
        },
        "title": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "description": {
          "anyOf": [
            {
              "$ref": "#/$defs/stringOrEnCyObject"
            },
            {
              "$ref": "#/$defs/atlDescriptionObject"
            }
          ]
        },
        "descriptionTotal": {
          "anyOf": [
            {
              "$ref": "#/$defs/atlDescriptionObject"
            }
          ]
        },
        "shortName": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "noPIITitle": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "includeIf": {
          "type": "string"
        },
        "removeItemIf": {
          "type": "string"
        },
        "continueIf": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "boolean"
            }
          ]
        },
        "continueLabel": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "presentationHint": {
          "type": "string",
          "pattern": "^(invisiblePageTitle)$"
        },
        "hideSaveAndComeBackButton": {
          "type": "boolean"
        },
        "redirects": {
          "type": "array"
        },
        "type": {
          "type": "string"
        },
        "dataRetrieve": {
          "$ref": "#/$defs/dataRetrieveArray"
        },
        "summaryName": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "summaryDescription": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "addAnotherQuestion": {
          "type": "object"
        },
        "defaultPage": {
          "type": "object"
        },
        "cyaPage": {
          "type": "object"
        },
        "repeatsUntil": {
          "type": "string"
        },
        "repeatsWhile": {
          "type": "string"
        },
        "repeaterContinueLabel": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "pageIdToDisplayAfterRemove": {
          "type": "string"
        },
        "repeatsMin": {
          "type": "string"
        },
        "repeatsMax": {
          "type": "string"
        },
        "confirmation": {
          "type": "object"
        },
        "instruction": {
          "type": "object"
        },
        "note": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "array"
            }
          ]
        },
        "doneNote": {
          "type": "array"
        },
        "tasks": {
          "type": "array",
          "additionalProperties": false,
          "items": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "title": {
                "$ref": "#/$defs/stringOrEnCyObject"
              },
              "id": {
                "type": "string"
              },
              "startIf": {
                "type": "string"
              },
              "includeIf": {
                "type": "string"
              },
              "caption": {
                "$ref": "#/$defs/stringOrEnCyObject"
              },
              "summarySection": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "title",
                  "header",
                  "footer"
                ],
                "properties": {
                  "title": {
                    "$ref": "#/$defs/stringOrEnCyObject"
                  },
                  "header": {
                    "$ref": "#/$defs/stringOrEnCyObject"
                  },
                  "footer": {
                    "$ref": "#/$defs/stringOrEnCyObject"
                  },
                  "displayWidth": {
                    "type": "string",
                    "pattern": "^(m|l|xl)$"
                  },
                  "keyDisplayWidth": {
                    "type": "string",
                    "pattern": "^(s|m|l)$"
                  },
                  "includeIf": {
                    "type": "string"
                  },
                  "continueLabel": {
                    "$ref": "#/$defs/stringOrEnCyObject"
                  },
                  "fields": {
                    "type": "array",
                    "items": {
                      "allOf": [
                        {
                          "$ref": "#/$defs/fields"
                        },
                        {
                          "not": {
                            "required": [
                              "excludeFromPdf"
                            ],
                            "errorMessage": "The excludeFromPdf only be defined on main summarySection"
                          }
                        }
                      ]
                    }
                  }
                }
              },
              "declarationSection": {
                "type": "object",
                "properties": {
                  "title": {
                    "$ref": "#/$defs/stringOrEnCyObject"
                  },
                  "shortName": {
                    "$ref": "#/$defs/stringOrEnCyObject"
                  },
                  "continueLabel": {
                    "$ref": "#/$defs/stringOrEnCyObject"
                  },
                  "includeIf": {
                    "type": "string"
                  },
                  "fields": {
                    "type": "array",
                    "items": {
                      "allOf": [
                        {
                          "$ref": "#/$defs/fields"
                        },
                        {
                          "not": {
                            "required": [
                              "excludeFromPdf"
                            ],
                            "errorMessage": "The excludeFromPdf only be defined on main summarySection"
                          }
                        }
                      ]
                    }
                  }
                },
                "required": [
                  "title",
                  "fields"
                ],
                "additionalProperties": false
              },
              "sections": {
                "type": "array",
                "additionalProperties": false,
                "items": {
                  "$ref": "#/$defs/sections"
                }
              }
            }
          }
        },
        "pages": {
          "type": "array",
          "additionalProperties": false,
          "items": {
            "$ref": "#/$defs/sections"
          }
        },
        "fields": {
          "type": "array",
          "items": {
            "allOf": [
              {
                "$ref": "#/$defs/fields"
              },
              {
                "not": {
                  "required": [
                    "excludeFromPdf"
                  ],
                  "errorMessage": "The excludeFromPdf only be defined on main summarySection"
                }
              }
            ]
          }
        }
      }
    },
    "fields": {
      "type": "object",
      "patternProperties": {
        "^(comment)": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "^(_)": {
          "type": [
            "array",
            "boolean",
            "number",
            "object",
            "string"
          ]
        }
      },
      "additionalProperties": false,
      "properties": {
        "id": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "format": {
          "type": "string"
        },
        "label": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "shortName": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "helpText": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "includeIf": {
          "type": "string"
        },
        "validIf": {
          "type": "string"
        },
        "value": {
          "type": "string"
        },
        "notPII": {
          "type": "boolean"
        },
        "toUpperCase": {
          "type": "boolean"
        },
        "displayInSummary": {
          "type": "boolean"
        },
        "choices": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "object",
                "patternProperties": {
                  "^(_)": {
                    "type": [
                      "array",
                      "boolean",
                      "number",
                      "object",
                      "string"
                    ]
                  }
                },
                "properties": {
                  "en": {
                    "type": "string"
                  },
                  "cy": {
                    "type": "string"
                  },
                  "dynamic": {
                    "type": "string"
                  },
                  "value": {
                    "type": "string"
                  },
                  "hint": {
                    "$ref": "#/$defs/stringOrEnCyObject"
                  },
                  "summaryValue": {
                    "$ref": "#/$defs/stringOrEnCyObject"
                  },
                  "includeIf": {
                    "type": "string"
                  }
                },
                "required": [
                  "en"
                ],
                "additionalProperties": false
              }
            ]
          }
        },
        "mandatory": {
          "type": "boolean"
        },
        "hint": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "uploadAnotherLabel": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "errorMessage": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "errorShortName": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "errorShortNameStart": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "errorExample": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "displayWidth": {
          "type": "string"
        },
        "keyDisplayWidth": {
          "type": "string",
          "pattern": "^(s|m|l)$"
        },
        "validators": {
          "type": "array"
        },
        "presentationHint": {
          "type": "string"
        },
        "submitMode": {
          "type": "string"
        },
        "multiline": {
          "type": "boolean"
        },
        "multivalue": {
          "type": "boolean"
        },
        "hideChoicesSelected": {
          "type": "boolean"
        },
        "suffix": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "prefix": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "offset": {
          "type": "string"
        },
        "displayCharCount": {
          "type": "boolean"
        },
        "revealingFields": {
          "type": "array",
          "items": {
            "items": {
              "$ref": "#/$defs/fields"
            }
          }
        },
        "selectionCriteria": {
          "type": "array"
        },
        "labelSize": {
          "type": "string"
        },
        "countryDisplayed": {
          "type": "boolean"
        },
        "countyDisplayed": {
          "type": "boolean"
        },
        "cityMandatory": {
          "type": "boolean"
        },
        "line2Mandatory": {
          "type": "boolean"
        },
        "line3Mandatory": {
          "type": "boolean"
        },
        "postcodeMandatory": {
          "type": "boolean"
        },
        "rows": {
          "type": [
            "integer",
            "array"
          ]
        },
        "hints": {
          "type": "array"
        },
        "optionHelpText": {
          "type": "array"
        },
        "infoText": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "infoType": {
          "type": "string",
          "enum": [
            "standard",
            "noformat",
            "long",
            "important",
            "banner"
          ]
        },
        "excludeFromPdf": {
          "type": "boolean"
        },
        "instruction": {
          "type": "object"
        },
        "idType": {
          "type": "string"
        },
        "idNumber": {
          "type": "string"
        },
        "regimeType": {
          "type": "string"
        },
        "dividerPosition": {
          "type": [
            "integer",
            "string"
          ]
        },
        "noneChoice": {
          "type": [
            "integer",
            "string"
          ]
        },
        "repeatsMin": {
          "type": "integer"
        },
        "repeatsMax": {
          "type": "integer"
        },
        "dataThreshold": {
          "type": "integer"
        },
        "repeatLabel": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "repeatAddAnotherText": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "noneChoiceError": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "dividerText": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "summaryValue": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "header": {
          "type": "array",
          "oneOf": [
            {
              "items": {
                "type": "string"
              }
            },
            {
              "items": {
                "type": "object",
                "properties": {
                  "en": {
                    "type": "string"
                  },
                  "cy": {
                    "type": "string"
                  },
                  "classes": {
                    "type": "string"
                  }
                },
                "required": [
                  "en"
                ],
                "additionalProperties": false
              }
            }
          ]
        },
        "chooseAddressLabel": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "confirmAddressLabel": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "international": {
          "type": "boolean"
        },
        "countryLookup": {
          "type": "boolean"
        },
        "priority": {
          "type": "string",
          "pattern": "^(UK|Standard)$"
        },
        "round": {
          "type": "string",
          "pattern": "^(Up|Down|HalfUp|HalfDown)$"
        },
        "allowedFileTypes": {
          "type": "array"
        },
        "fileSizeLimit": {
          "type": "integer"
        },
        "ranges": {
          "type": "array"
        },
        "intervalMins": {
          "type": "integer"
        },
        "extraLetterSpacing": {
          "type": "boolean"
        },
        "reference": {
          "type": "string"
        },
        "amountInPence": {
          "type": "string"
        },
        "isStartButton": {
          "type": "boolean"
        },
        "classes": {
          "type": "string"
        },
        "fields": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/fields"
          }
        },
        "verifiedBy": {
          "type": "object"
        },
        "pageIdsToDisplayOnChange": {
          "type": "array"
        }
      },
      "dependencies": {
        "infoText": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(info)$"
            }
          }
        },
        "infoType": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(info)$"
            }
          }
        },
        "choices": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(choice|revealingChoice)$"
            }
          }
        },
        "multivalue": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(choice|revealingChoice)$"
            }
          }
        },
        "hints": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(choice|revealingChoice)$"
            }
          }
        },
        "optionHelpText": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(choice|revealingChoice)$"
            }
          }
        },
        "dividerPosition": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(choice|revealingChoice)$"
            }
          }
        },
        "noneChoice": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(choice|revealingChoice)$"
            }
          }
        },
        "noneChoiceError": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(choice|revealingChoice)$"
            }
          }
        },
        "dividerText": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(choice|revealingChoice)$"
            }
          }
        },
        "displayCharCount": {
          "required": [
            "type",
            "multiline"
          ],
          "properties": {
            "type": {
              "pattern": "^(text)$"
            },
            "multiline": {
              "enum": [
                true
              ]
            }
          }
        },
        "dataThreshold": {
          "required": [
            "type",
            "multiline"
          ],
          "properties": {
            "type": {
              "pattern": "^(text)$"
            },
            "multiline": {
              "enum": [
                true
              ]
            }
          }
        },
        "format": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(text|choice|date|group)$"
            }
          }
        },
        "cityMandatory": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(address|overseasAddress)$"
            }
          }
        },
        "countyDisplayed": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(address)$"
            }
          }
        },
        "international": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(address)$"
            }
          }
        },
        "countryDisplayed": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(overseasAddress)$"
            }
          }
        },
        "countryLookup": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(overseasAddress)$"
            }
          }
        },
        "line2Mandatory": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(overseasAddress)$"
            }
          }
        },
        "line3Mandatory": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(overseasAddress)$"
            }
          }
        },
        "postcodeMandatory": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(overseasAddress)$"
            }
          }
        },
        "confirmAddressLabel": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(postcodeLookup)$"
            }
          }
        },
        "chooseAddressLabel": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(postcodeLookup)$"
            }
          }
        },
        "prefix": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(text)$"
            },
            "format": {
              "pattern": "^((?!sterling|positiveSterling|positiveWholeSterling).)*$"
            }
          }
        },
        "header": {
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "pattern": "^(table)$"
            }
          }
        },
        "errorExample": {
          "oneOf": [
            {
              "required": [
                "type"
              ],
              "properties": {
                "type": {
                  "pattern": "^(taxPeriodDate|calendarDate|date|address)$"
                }
              }
            },
            {
              "required": [
                "type",
                "format"
              ],
              "properties": {
                "type": {
                  "pattern": "^(text)$"
                },
                "format": {
                  "pattern": "^(number|positiveNumber|positiveWholeNumber|sterling|positiveSterling|positiveWholeSterling)$"
                }
              }
            }
          ]
        }
      }
    },
    "stringOrEnCyObject": {
      "oneOf": [
        {
          "type": "string"
        },
        {
          "type": "object",
          "properties": {
            "en": {
              "type": "string"
            },
            "cy": {
              "type": "string"
            }
          },
          "required": [
            "en"
          ],
          "additionalProperties": false
        },
        {
          "type": "array",
          "items": {
            "type": "object",
            "patternProperties": {
              "^(_)": {
                "type": "string"
              }
            },
            "properties": {
              "includeIf": {
                "type": "string"
              },
              "en": {
                "type": "string"
              },
              "cy": {
                "type": "string"
              }
            },
            "required": [
              "en"
            ],
            "additionalProperties": false
          }
        }
      ]
    },
    "dataRetrieveArray": {
      "type": "array",
      "items": {
        "type": "object",
        "oneOf": [
          {
            "patternProperties": {
              "^(_)": {
                "type": "string"
              }
            },
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "hmrcRosmRegistrationCheck"
                ]
              },
              "id": {
                "type": "string"
              },
              "if": {
                "type": "string"
              },
              "parameters": {
                "type": "object",
                "properties": {
                  "regime": {
                    "type": "string"
                  },
                  "utr": {
                    "type": "string"
                  }
                },
                "required": [
                  "regime",
                  "utr"
                ],
                "additionalProperties": false
              }
            },
            "required": [
              "type",
              "id",
              "parameters"
            ],
            "additionalProperties": false
          },
          {
            "patternProperties": {
              "^(_)": {
                "type": "string"
              }
            },
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "agentDetails"
                ]
              },
              "id": {
                "type": "string"
              },
              "if": {
                "type": "string"
              },
              "parameters": {
                "type": "object",
                "properties": {
                  "agentReferenceNumber": {
                    "type": "string"
                  }
                },
                "required": [
                  "agentReferenceNumber"
                ],
                "additionalProperties": false
              }
            },
            "required": [
              "type",
              "id",
              "parameters"
            ],
            "additionalProperties": false
          },
          {
            "patternProperties": {
              "^(_)": {
                "type": "string"
              }
            },
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "ninoInsights",
                  "employments"
                ]
              },
              "id": {
                "type": "string"
              },
              "if": {
                "type": "string"
              },
              "parameters": {
                "type": "object",
                "properties": {
                  "nino": {
                    "type": "string"
                  },
                  "taxYear": {
                    "type": "string"
                  }
                },
                "required": [
                  "nino"
                ],
                "additionalProperties": false
              }
            },
            "required": [
              "type",
              "id",
              "parameters"
            ],
            "additionalProperties": false
          },
          {
            "patternProperties": {
              "^(_)": {
                "type": "string"
              }
            },
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "validateBankDetails",
                  "personalBankAccountExistence",
                  "personalBankAccountExistenceWithName",
                  "businessBankAccountExistence",
                  "bankAccountInsights"
                ]
              },
              "id": {
                "type": "string"
              },
              "if": {
                "type": "string"
              },
              "parameters": {
                "type": "object",
                "properties": {
                  "sortCode": {
                    "type": "string"
                  },
                  "accountNumber": {
                    "type": "string"
                  },
                  "companyName": {
                    "type": "string"
                  },
                  "firstName": {
                    "type": "string"
                  },
                  "lastName": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  }
                },
                "required": [
                  "sortCode",
                  "accountNumber"
                ],
                "additionalProperties": false
              }
            },
            "required": [
              "type",
              "id",
              "parameters"
            ],
            "additionalProperties": false
          },
          {
            "patternProperties": {
              "^(_)": {
                "type": "string"
              }
            },
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "companyHouseProfile",
                  "companyHouseActiveOfficers"
                ]
              },
              "id": {
                "type": "string"
              },
              "if": {
                "type": "string"
              },
              "parameters": {
                "type": "object",
                "properties": {
                  "companyNumber": {
                    "type": "string"
                  }
                },
                "required": [
                  "companyNumber"
                ],
                "additionalProperties": false
              }
            },
            "required": [
              "type",
              "id",
              "parameters"
            ],
            "additionalProperties": false
          },
          {
            "patternProperties": {
              "^(_)": {
                "type": "string"
              }
            },
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "hmrcTaxRates"
                ]
              },
              "id": {
                "type": "string"
              },
              "if": {
                "type": "string"
              },
              "parameters": {
                "type": "object",
                "properties": {
                  "regime": {
                    "type": "string"
                  },
                  "code": {
                    "type": "string"
                  },
                  "date": {
                    "type": "string"
                  }
                },
                "required": [
                  "regime",
                  "code",
                  "date"
                ],
                "additionalProperties": false
              }
            },
            "required": [
              "type",
              "id",
              "parameters"
            ],
            "additionalProperties": false
          },
          {
            "patternProperties": {
              "^(_)": {
                "type": "string"
              }
            },
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "delegatedAgentAuthVat"
                ]
              },
              "id": {
                "type": "string"
              },
              "if": {
                "type": "string"
              },
              "parameters": {
                "type": "object",
                "properties": {
                  "vatRegistrationNumber": {
                    "type": "string"
                  }
                },
                "required": [
                  "vatRegistrationNumber"
                ],
                "additionalProperties": false
              }
            },
            "required": [
              "type",
              "id",
              "parameters"
            ],
            "additionalProperties": false
          },
          {
            "patternProperties": {
              "^(_)": {
                "type": "string"
              }
            },
            "properties": {
              "type": {
                "type": "string",
                "enum": [
                  "delegatedAgentAuthPaye"
                ]
              },
              "id": {
                "type": "string"
              },
              "if": {
                "type": "string"
              },
              "parameters": {
                "type": "object",
                "properties": {
                  "payeReference": {
                    "type": "string"
                  }
                },
                "required": [
                  "payeReference"
                ],
                "additionalProperties": false
              }
            },
            "required": [
              "type",
              "id",
              "parameters"
            ],
            "additionalProperties": false
          }
        ]
      }
    },
    "draftRetrievalObject": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "agent": {
          "type": "object",
          "properties": {
            "method": {
              "type": "string",
              "pattern": "^(accessCode|notPermitted|onePerUser|submissionReference)$"
            },
            "showContinueOrDeletePage": {
              "type": "boolean"
            }
          },
          "additionalProperties": false,
          "required": [
            "method"
          ]
        },
        "individual": {
          "type": "object",
          "properties": {
            "method": {
              "type": "string",
              "pattern": "^(accessCode|notPermitted|onePerUser|submissionReference)$"
            },
            "showContinueOrDeletePage": {
              "type": "boolean"
            }
          },
          "additionalProperties": false,
          "required": [
            "method"
          ]
        },
        "organisation": {
          "type": "object",
          "properties": {
            "method": {
              "type": "string",
              "pattern": "^(accessCode|notPermitted|onePerUser|submissionReference)$"
            },
            "showContinueOrDeletePage": {
              "type": "boolean"
            }
          },
          "additionalProperties": false,
          "required": [
            "method"
          ]
        }
      }
    },
    "atlDescriptionObject": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "key": {
          "$ref": "#/$defs/stringOrEnCyObject"
        },
        "value": {
          "$ref": "#/$defs/stringOrEnCyObject"
        }
      }
    }
  }
}
