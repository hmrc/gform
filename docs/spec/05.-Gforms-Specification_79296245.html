<!DOCTYPE html>
<html>
    <head>
        <title>EEITT : 05. Gforms Specification</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">EEITT</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            EEITT : 05. Gforms Specification
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Nathan Dolan</span>, last modified on Nov 21, 2017
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1512421041532 {padding: 0px;}
div.rbtoc1512421041532 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1512421041532 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1512421041532'>
<ul class='toc-indentation'>
<li><a href='#id-05.GformsSpecification-FormTemplateStructure'>Form Template Structure</a>
<ul class='toc-indentation'>

<ul class='toc-indentation'>
<li><a href='#id-05.GformsSpecification-GformsFormTemplateSchema'>Gforms Form Template Schema </a></li>
</ul>
<li><a href='#id-05.GformsSpecification-FormTemplateProperties'>Form Template Properties</a></li>
<li><a href='#id-05.GformsSpecification-AuthenticationandAuthorizationConfiguration'>Authentication and Authorization Configuration</a>
<ul class='toc-indentation'>
<li><a href='#id-05.GformsSpecification-StandardHMRCAuthModuleConfiguration'>Standard HMRC Auth Module Configuration</a></li>
<li><a href='#id-05.GformsSpecification-LegacyEEITTAuthModuleConfiguration'>Legacy EEITT Auth Module Configuration</a></li>
</ul>
</li>
<li><a href='#id-05.GformsSpecification-FormDestinationConfiguration'>Form Destination Configuration</a>
<ul class='toc-indentation'>
<li><a href='#id-05.GformsSpecification-DMSDestinationConfiguration'>DMS Destination Configuration</a></li>
<li><a href='#id-05.GformsSpecification-DESDestinationConfiguration'>DES Destination Configuration</a></li>
<li><a href='#id-05.GformsSpecification-SubmittingtoEmail'>Submitting to Email</a></li>
</ul>
</li>
<li><a href='#id-05.GformsSpecification-SectionProperties'>Section Properties</a></li>
<li><a href='#id-05.GformsSpecification-FieldProperties'>Field Properties</a></li>
</ul>
</li>
<li><a href='#id-05.GformsSpecification-Examples'>Examples</a>
<ul class='toc-indentation'>
<li><a href='#id-05.GformsSpecification-Example#1-E930A-Excisedutyongasforuseasroadfuelform:'>Example #1 - E930A - Excise duty on gas for use as road fuel form:</a></li>
<li><a href='#id-05.GformsSpecification-Example#2-IPT100-Insurancepremiumtaxform:'>Example #2 - IPT100 - Insurance premium tax form:</a></li>
</ul>
</li>
<li><a href='#id-05.GformsSpecification-FormSpecificationDesignPrinciples'>Form Specification Design Principles</a></li>
</ul>
</div></p><h1 id="id-05.GformsSpecification-FormTemplateStructure">Form Template Structure</h1><p>Gforms form templates are JSON documents that conform to the gforms form template schema.  This schema and examples of compliant JSON documents are provided below.  Alongside each gforms template JSON is a link to a prototype that shows how that JSON should be rendered by the gforms-frontend UI. </p><h3 id="id-05.GformsSpecification-GformsFormTemplateSchema">Gforms Form Template Schema </h3><p>Essentially a form template consists of 3 basic elements: the form template header properties, a list of sections, each of which contains a list of fields.  For example:</p><ul style="list-style-type: square;"><li><strong>Form template</strong><strong><br/></strong></li><ul style="list-style-type: square;"><li><strong>Destination config</strong></li><li><strong>Auth config</strong><ul style="list-style-type: square;"><li><strong>Enrolment section <em>(optional)</em></strong></li></ul></li><li><strong>Section 1 </strong><ul style="list-style-type: square;"><li><strong>Field 1</strong></li><li><strong>Field 2</strong></li><li><strong>Field 3</strong></li></ul></li><li><strong>Section 2..n</strong><ul style="list-style-type: square;"><li><strong>Field 1</strong></li><li><strong>Field n...</strong></li></ul></li><li><strong>Declaration section</strong><ul style="list-style-type: square;"><li><strong>Field 1</strong></li><li><strong>Field n</strong></li></ul></li><li><strong>Acknowledgement section</strong><ul style="list-style-type: square;"><li><strong>Field 1</strong></li><li><strong>Field n</strong></li></ul></li></ul></ul><p>The properties of these<strong> </strong>elements are defined below:</p><h2 id="id-05.GformsSpecification-FormTemplateProperties">Form Template Properties</h2><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 95.7313%;"><colgroup><col style="width: 11.2742%;"/><col style="width: 42.5913%;"/><col style="width: 6.50203%;"/><col style="width: 7.21785%;"/><col style="width: 23.5027%;"/></colgroup><tbody><tr><th class="confluenceTh">Property ID</th><th class="confluenceTh">Description</th><th colspan="1" class="confluenceTh"><p>(M)andatory or</p><p>(O)ptional</p></th><th class="confluenceTh"><p>Default value where Optional</p></th><th colspan="1" class="confluenceTh">Example</th></tr><tr><td class="confluenceTd"><strong>formTemplateId</strong></td><td class="confluenceTd">A unique ID to use for this form template.</td><td colspan="1" class="confluenceTd">M</td><td class="confluenceTd">-</td><td colspan="1" class="confluenceTd">E930a</td></tr><tr><td class="confluenceTd"><strong>formName</strong></td><td class="confluenceTd">The display name of this form</td><td colspan="1" class="confluenceTd">M</td><td class="confluenceTd">-</td><td colspan="1" class="confluenceTd">Excise duty on gas for use as road fuel return</td></tr><tr><td class="confluenceTd"><span style="color: rgb(153,153,153);"><strong>version</strong></span></td><td class="confluenceTd"><p><span style="color: rgb(153,153,153);">The version number. Each form type can have multiple versions.</span></p><p><span style="color: rgb(153,153,153);">Must be in format:</span></p><p><span style="color: rgb(153,153,153);"><strong>Major.Minor.Part</strong></span></p><p><span style="color: rgb(153,153,153);">Where major/minor/part are all whole numbers.</span></p></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">M</span></td><td class="confluenceTd"><span style="color: rgb(153,153,153);">-</span></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">0.1.0</span></td></tr><tr><td class="confluenceTd"><strong>description</strong></td><td class="confluenceTd">A description for this form</td><td colspan="1" class="confluenceTd">O</td><td class="confluenceTd">&lt;empty&gt;</td><td colspan="1" class="confluenceTd">Fill in your excise duty form for gas for use as road fuel online</td></tr><tr><td colspan="1" class="confluenceTd"><strong>formCategory</strong></td><td colspan="1" class="confluenceTd"><p>A categorization for this form. The category can be used to alter the appearance and behaviour of the UI engine.</p><p>Currently the UI engine supports the following categories:</p><ul><li><strong>hmrcReturnForm</strong></li><li><strong>hmrcClaimForm</strong></li></ul></td><td colspan="1" class="confluenceTd">O</td><td colspan="1" class="confluenceTd"><span>hmrcReturnForm</span></td><td colspan="1" class="confluenceTd">hmrcClaimForm</td></tr><tr><td colspan="1" class="confluenceTd"><strong>developmentPhase</strong></td><td colspan="1" class="confluenceTd"><p>The development phase of this form. Determines the development phase banner shown by the UI engine. The following values are supported:</p><ul><li><strong>research</strong></li><li><strong>alpha</strong></li><li><strong>beta</strong></li><li><strong>live</strong></li></ul></td><td colspan="1" class="confluenceTd">O</td><td colspan="1" class="confluenceTd">research<strong> </strong></td><td colspan="1" class="confluenceTd"><span>alpha</span></td></tr><tr><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);"><strong>submitSuccessUrl</strong></span></td><td colspan="1" class="confluenceTd"><p><span style="color: rgb(153,153,153);">Where the gform engine should take the user to after successful submission of the form.</span></p><p><span style="color: rgb(153,153,153);">Also used for any navigation away from the form, for example the Home link or Save and come back later.</span></p></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">O</span></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">-</span></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">/business-account</span></td></tr><tr><td colspan="1" class="confluenceTd"><strong>submissionReference</strong></td><td colspan="1" class="confluenceTd">The reference number used to track submissions for this form. This is provided to the user in their receipt at the time of submission.</td><td colspan="1" class="confluenceTd">O</td><td colspan="1" class="confluenceTd">$user.entityId</td><td colspan="1" class="confluenceTd">$utr</td></tr><tr><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);"><strong>ttlDays</strong></span></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">Specifies how long to store the data from forms of this type locally, in days. Note fields marked as <em>sensitive </em>are never stored regardless of this setting. Data from locally stored forms can be used in other forms by using <em>value </em><em>expressions </em>in the form template.</span></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">O</span></td><td colspan="1" class="confluenceTd"><p><span style="color: rgb(153,153,153);">730</span></p><p><span style="color: rgb(153,153,153);"><em>(2 years)</em></span></p></td><td colspan="1" class="confluenceTd"><p><span style="color: rgb(153,153,153);">0</span></p><p><span style="color: rgb(153,153,153);"><em>(no local storage of form data)</em></span></p></td></tr><tr><td class="confluenceTd"><span style="color: rgb(153,153,153);"><strong>archived</strong></span></td><td class="confluenceTd"><p><span style="color: rgb(153,153,153);">Whether this form is deemed as <em>archived</em>. Set to true or false.</span></p></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">O</span></td><td class="confluenceTd"><span style="color: rgb(153,153,153);">false</span></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">true</span></td></tr><tr><td class="confluenceTd"><span style="color: rgb(153,153,153);"><strong>characterSet</strong></span></td><td class="confluenceTd"><span style="color: rgb(153,153,153);">The character set that data for this form type should be provided in.</span></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">O</span></td><td class="confluenceTd"><span style="color: rgb(153,153,153);">UTF-8</span></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">ASCII</span></td></tr><tr><td colspan="1" class="confluenceTd"><strong>authConfig</strong></td><td colspan="1" class="confluenceTd"><p><span>Container for the auth configuration for this form type. This is mandatory - all form templates must specify what auth controls they require.</span></p><p><span>See the Authentication and Authorization Configuration section below for details.</span></p></td><td colspan="1" class="confluenceTd">M</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><div class="content-wrapper"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">&quot;authConfig&quot;: {
  &quot;authModule&quot;: &quot;hmrc&quot;
}</pre>
</div></div></div></td></tr><tr><td colspan="1" class="confluenceTd"><strong>destinations</strong></td><td colspan="1" class="confluenceTd"><p>Configuration about where to submit data captured for this form type.</p><p>Must be one or more of:</p><ul><li><em>hmrcDMS</em> – to submit forms of this type to DMS via File Upload Service</li><li><em>hmrcDES</em> – to submit forms of this type to a DES API</li><li><em>hmrcEmail</em> – to submit forms of this type as an email using the HMRC email service</li></ul><p>Each destination type has different destination configuration options (see below) which must be included if the destination is added here.</p><p>Submission to each destination is executed in the given sequence.</p></td><td colspan="1" class="confluenceTd">M</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><div class="content-wrapper"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">&quot;destinations&quot;:[&quot;hmrcDms&quot;,&quot;hmrcEmail&quot;]</pre>
</div></div></div></td></tr><tr><td colspan="1" class="confluenceTd"><strong>destinationConfig</strong></td><td colspan="1" class="confluenceTd">Contains a JSON object for each destination type provided in <em>destinations </em>(see above). The config is specific to the destination, documented in the Form Destination Configuration section below.</td><td colspan="1" class="confluenceTd">M</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><div class="content-wrapper"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">&quot;destinations&quot;:[&quot;hmrcDms&quot;,&quot;hmrcEmail&quot;],
&quot;destinationConfig&quot;: [
  {
    &quot;destination&quot;: &quot;hmrcDms&quot;,
    &lt;hmrcDms config params&gt;
  }, 
  { 
    &quot;destination&quot;: &quot;hmrcEmail&quot;,
    &lt;email config params&gt;
  }
]</pre>
</div></div></div></td></tr><tr><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);"><strong>preAuthSections</strong></span></td><td colspan="1" class="confluenceTd"><p><span style="color: rgb(153,153,153);">Optionally, a list of sections that need to be completed by the user prior to authentication using the <em>authModule</em> given in <em>authConfig</em>. These sections form the &quot;unauthenticated journey&quot; - the part of the journey that the user must complete before we establish who they are and whether they are permitted to complete the rest of the form.</span></p><p><span style="color: rgb(153,153,153);">These sections may be used to capture information required by the authModule, they may establish whether the user is actually visiting the right form (and if not provide a link to<em> </em>take them to the right place), or they may be purely to display information to the user prior to starting the auth and form-filing journeys.</span></p></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">O</span></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">-</span></td><td colspan="1" class="confluenceTd"><div class="content-wrapper"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">&quot;preAuthSections&quot;: [ 
	{ &lt;section 1 JSON&gt; }, 
	{ &lt;section 2 JSON&gt; }, 
	{ &lt;section n JSON&gt; }
]</pre>
</div></div></div></td></tr><tr><td colspan="1" class="confluenceTd"><strong>sections</strong></td><td colspan="1" class="confluenceTd">The list of sections in this form. See gform template Section definition below</td><td colspan="1" class="confluenceTd">M</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><div class="content-wrapper"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">&quot;sections&quot;: [
	{ &lt;section 1 JSON&gt; },
	{ &lt;section 2 JSON&gt; },
	{ &lt;section n JSON&gt; }
]</pre>
</div></div></div></td></tr><tr><td colspan="1" class="confluenceTd"><strong>declarationSection</strong></td><td colspan="1" class="confluenceTd"><p>A single section that will be shown after the summary view.</p><p>Typically this might be used to capture declaration information from the user relating to the data they have entered the main sections of the form. User research shows this kind of content is best shown <em>after </em>playing back summary information to the user and this gives the user a chance to review and consult before completing a declaration.</p><p>Note data captured here still forms part of the submitted data, subject to use of the <em>submitMode </em>option.</p></td><td colspan="1" class="confluenceTd">M</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><div class="content-wrapper"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">&quot;declarationSection&quot;: {
  &lt;declaration section JSON&gt;
}</pre>
</div></div></div></td></tr><tr><td colspan="1" class="confluenceTd"><strong>confirmationEmail</strong></td><td colspan="1" class="confluenceTd">The email address to which to send</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd"><strong>acknowledgement<strong>Section</strong></strong></td><td colspan="1" class="confluenceTd"><p>A single section containing confirmation and next steps information for the user.</p><p>In a UI this section would be displayed after submission of the form to all the defined destinations.</p><p>Note that no fields in the acknowledgement page are submitted with the form. As such it is not permitted to include fields that capture data in the acknowledgementSection. Typically this section will just include info components.</p></td><td colspan="1" class="confluenceTd">M</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><div class="content-wrapper"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">&quot;acknowledgementSection&quot;: { 
  &lt;acknowledgement section JSON&gt;
}</pre>
</div></div></div></td></tr></tbody></table></div><p> </p><h2 id="id-05.GformsSpecification-AuthenticationandAuthorizationConfiguration"><span>Authentication and Authorization Configuration</span></h2><p>The form template JSON contains details of how to authenticate and authorize users, in the <em>authConfig </em>section.</p><h3 id="id-05.GformsSpecification-StandardHMRCAuthModuleConfiguration">Standard HMRC Auth Module Configuration</h3><p><span>Standard HMRC Auth (<em>authModule=hmrc</em>) indicates to the gforms-frontend UI engine that users of this form type must be identified and authenticated using the </span><a href="https://confluence.tools.tax.service.gov.uk/display/PE/Authorisation+for+microservices" rel="nofollow">HMRC MDTP Auth</a><span> service. It will therefore check for an MDTP bearer token and if not present will redirect the user to undertake the auth journey before allowing them to access the form.</span></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 92.6554%;"><colgroup><col style="width: 12.3967%;"/><col style="width: 36.3883%;"/><col style="width: 7.77106%;"/><col style="width: 10.6081%;"/><col style="width: 32.6878%;"/></colgroup><tbody><tr><th class="confluenceTh">Property ID</th><th class="confluenceTh">Description</th><th colspan="1" class="confluenceTh"><p>(M)andatory or</p><p>(O)ptional</p></th><th class="confluenceTh"><p>Default value where Optional</p></th><th colspan="1" class="confluenceTh">Example</th></tr><tr><td colspan="1" class="confluenceTd"><p><strong>authModule</strong></p></td><td colspan="1" class="confluenceTd"><p>The name of the auth module being configured, in this case, <em>&quot;hmrc&quot;.</em></p><p><span>The other properties below are specific to this module.</span></p><p><span>Note if no other properties are specified, then the user will be identified and authenticated using Auth and the default government gateway journey if necessary, but will not be subject to any authorization.</span></p></td><td colspan="1" class="confluenceTd">M</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><pre>&quot;authModule&quot;: &quot;hmrc&quot;</pre></td></tr><tr><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);"><strong>confidenceLevel</strong></span></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">If provided, the user will be required to reach the given confidenceLevel during the <em>authentication</em> journey. Auth and the government gateway services will determine what information is required from the user to meet this confidence level. </span></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">O</span></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">50</span></td><td colspan="1" class="confluenceTd"><pre><span style="color: rgb(153,153,153);">&quot;confidenceLevel&quot;: &quot;150&quot;</span></pre></td></tr><tr><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);"><strong>permittedAffinityGroups</strong></span></td><td colspan="1" class="confluenceTd"><p><span style="color: rgb(153,153,153);">If provided, the authenticated user's <a href="https://confluence.tools.tax.service.gov.uk/display/PE/Retrievals+Reference#RetrievalsReference-affinityGroup" rel="nofollow"><span style="color: rgb(153,153,153);">affinity group is checked using Auth</span></a> to ensure it matches one of those given here. If it does not, the user is denied access to the form.</span></p></td><td colspan="1" class="confluenceTd"><span style="color: rgb(153,153,153);">O</span></td><td colspan="1" class="confluenceTd"><pre><span style="color: rgb(153,153,153);">[&quot;Organisation&quot;]</span></pre></td><td colspan="1" class="confluenceTd"><pre><span style="color: rgb(153,153,153);">[&quot;Organisation&quot;, &quot;Individual&quot;]</span></pre></td></tr><tr><td colspan="1" class="confluenceTd"><strong>serviceId</strong></td><td colspan="1" class="confluenceTd"><p>If provided, this is a service ID (as defined in the Q-Pack) of the service to which the user must be enrolled. Omit to allow any authenticated user access to the form.</p><p>Gforms will <a href="https://confluence.tools.tax.service.gov.uk/display/PE/Retrievals+Reference#RetrievalsReference-authorisedEnrolments" rel="nofollow">use Auth to check that the user's set of authorized enrolments</a> includes the given serviceId.</p><p>If provided and the user is found to be <strong>not</strong> enrolled to the given service:</p><ul><li><span>if <em>enrolmentSection </em>is provided, the user will be taken to the</span><span> <em>enrolmentSection </em>to</span><strong> </strong><span>capture their known facts (service-specific identifier and verifiers) in order to enrol the user.</span></li><li><span>if <em>enrolmentSection </em>is not provided, the user will be denied access to the form.</span></li></ul></td><td colspan="1" class="confluenceTd">O</td><td colspan="1" class="confluenceTd"><div class="line number1 index0 alt2">-</div></td><td colspan="1" class="confluenceTd"><div class="line number1 index0 alt2"><code class="java string">&quot;serviceId&quot;</code><code class="java plain">: </code><code class="java string">&quot;<span style="color: rgb(0,0,0);">HMRC-OBTDS-ORG</span>&quot;</code></div></td></tr><tr><td colspan="1" class="confluenceTd"><strong>regimeId</strong></td><td colspan="1" class="confluenceTd"><p>If provided, this is a 2 to 8 character code for the regime that this form relates to.</p><p>If a 2 character code is provided, the <em>identifiers</em> associated with the users service enrolment (identified by <em>serviceId </em>which must be provided where <em>regimeId</em> is provided,) will be checked to ensure its 3rd and 4th characters match the <em>regimeId</em> given.</p><p>If a 3 character code is provided then the 3rd, 4th and 5th characters of an <em>identifier</em> must match. <span>If a 4 character code is provided then the 3rd, 4th, 5th and 6th characters of an </span><em>identifier</em><span> must match, </span>and so on for 5-8 character codes.</p><p>Note the user may have multiple enrolments associated with the given <em>serviceId</em> and the identifier for each of these should be checked.</p></td><td colspan="1" class="confluenceTd"><p>O</p><p><em>*not valid if serviceId is not provided</em></p></td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><pre>&quot;regimeID&quot;: &quot;IP&quot;</pre></td></tr><tr><td colspan="1" class="confluenceTd"><strong>enrolmentSection</strong></td><td colspan="1" class="confluenceTd"><div class="content-wrapper"><p>If provided, contains a <em>section</em> (see below) that must be completed in the event that the user is not enroled to the service identified by <em>serviceId</em> (see above).</p><p>The section must contain fields with the given IDs:</p><ul><li>identifier_<em>name*</em></li><li>verifier_<em>name*</em><em><br/></em></li></ul><p>Where <em>name </em>is the name of the identifier or verifier as defined in the qpack for the service identified by <em>serviceId</em>. There may be many identifiers and many verifiers following this pattern.</p><p>Regardless of any options given, all data in the enrolmentSection is treated as <em>sensitive</em> (not persisted or logged) and is not captured as part of the form data.</p><p>After this data has been captured, gforms will call the <a href="https://confluence.tools.tax.service.gov.uk/display/SOS/tax-enrolment+-+Synchronous+ROSM">tax-enrolments /enrolment API</a> using <em>serviceId</em> as the <em>key, </em>and including each identifier and verifier given, using name as defined above as the identifier/verifier <em>key</em> and the fields value as the <em>value</em>.</p><p>For example the example JSON given to the right would result in the following call to tax-enrolments if the user filled in the EtmpRegistrationNumber and BusinessPostcode.</p><div class="line number1 index0 alt2"><p> </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">PUT /tax-enrolments/service/:serviceName/enrolments
{
    &quot;enrolments&quot;: [
        {
            &quot;key&quot;: &quot;HMRC-OBTDS-ORG&quot;,
            &quot;identifiers&quot;: [
                {
                    &quot;key&quot;: &quot;EtmpRegistrationNumber&quot;
                    &quot;value&quot;: &quot;XTGF00000100065&quot;
                }
            ],
            &quot;verifiers&quot;: [
                {
                    &quot;key&quot;: &quot;Postcode&quot;
                    &quot;value&quot;: &quot;BN12 4XL&quot;
                }
            ]
        }
    ]
}</pre>
</div></div><p>If this call is successful this indicates the identifier and verifiers provided by the user match those stored by <a href="https://confluence.tools.tax.service.gov.uk/display/EMAC/Enrolment+Store+API">EMAC</a> and the user willl then be taken to the first page of the form.</p><p>If this call is unsuccessful this indicates the identifer is not known to EMAC or the verifiers provided are not correct for the given identifier, or insufficient verifiers have been provided. The qpack for the service identified by <em>serviceId </em>determines which verifiers are required and these rules for each service are built in to EMAC. Note the tax-enrolments API in turn calls EMAC.</p><p><span>For example if the user were to only provide the identifier with no verifiers, the call to tax-enrolments would return an error as the </span>HMRC-OBTDS-ORG service requires that at least 1 verifier be provided.</p><p>If the enrolment call is unsuccessful, then the user will be given the opportunity to try again but will not be given access to the form until the call is successful.</p><p>After a successful call to the enrolments API, the user is allocated to the service and in future will not be taken to the <em>enrolmentSection </em>because <span>HMRC-OBTDS-ORG </span>will be present in the user's set of enrolments (see Description for <em>serviceId</em> above).</p></div></div></td><td colspan="1" class="confluenceTd"><p>O</p><p><em>*not valid if serviceId is not provided</em></p></td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><div class="content-wrapper"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">&quot;authModule&quot;: &quot;hmrc&quot;,
&quot;serviceId&quot;: &quot;HMRC-OBTDS-ORG&quot;,
&quot;regimeID&quot;: &quot;VA&quot;
&quot;enrolmentSection&quot;: {
  &quot;title&quot;: &quot;Sign up for filing for VAT126 online&quot; 
  &quot;fields&quot;: [
    {
      &quot;id&quot;: &quot;identifier_EtmpRegistrationNumber&quot;,
      &quot;type&quot;: &quot;text&quot;,
      &quot;format&quot;: &quot;text(15..15)&quot;,
      &quot;label&quot;: &quot;Enter your VAT126 Reference Number&quot;
    },
    {
      &quot;id&quot;: &quot;verifier_BusinessPostcode&quot;,
      &quot;type&quot;: &quot;text&quot;,
      &quot;format&quot;: &quot;text(5..8)&quot;,
      &quot;label&quot;: &quot;If you are based in the UK, enter
 the postcode of your primary place of business&quot;,
      &quot;mandatory&quot;: &quot;false&quot;,
      &quot;infoText&quot;: &quot;This is the postcode you gave to
 HMRC when you submitted your first VAT126 claim&quot;
    },        
    {
      &quot;id&quot;: &quot;verifier_NonUKCountryCode&quot;,
      &quot;type&quot;: &quot;text&quot;,
      &quot;format&quot;: &quot;nonUkCountryCode&quot;,
      &quot;label&quot;: &quot;If you are not based in the UK,
enter your 2-character country code&quot;,
      &quot;mandatory&quot;: &quot;false&quot;,
      &quot;infoText&quot;: &quot;This is 2-character country code
 for the country of your primary place of business,
 that you gave to HMRC when you submitted your
 first VAT126 claim.  For example FR for France
 or US for the United States.&quot;
    }
  ]
}</pre>
</div></div><p> </p><p> </p></div></td></tr></tbody></table></div><p><span><br/></span></p><h3 id="id-05.GformsSpecification-LegacyEEITTAuthModuleConfiguration">Legacy EEITT Auth Module Configuration</h3><p>The legacy EEITT auth module uses an internal database of users, which must be updated manually by the live support team.  As such it should only be used for legacy forms from EEITT and testing.</p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 92.9692%;"><colgroup><col style="width: 12.6007%;"/><col style="width: 37.4946%;"/><col style="width: 7.74479%;"/><col style="width: 8.97412%;"/><col style="width: 33.069%;"/></colgroup><tbody><tr><th class="confluenceTh">Property ID</th><th class="confluenceTh">Description</th><th colspan="1" class="confluenceTh"><p>(M)andatory or</p><p>(O)ptional</p></th><th class="confluenceTh"><p>Default value where Optional</p></th><th colspan="1" class="confluenceTh">Example</th></tr><tr><td colspan="1" class="confluenceTd"><p><strong>authModule</strong></p></td><td colspan="1" class="confluenceTd"><p>The name of the auth module being configured, in this case, <em>&quot;legacyEEITTAuth&quot;.</em></p><p>There are no properties for this module. The gforms engine will redirect to the Legacy EEITT Auth service to prompt for their EEITT tax reference and postcode.</p></td><td colspan="1" class="confluenceTd">M</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><pre>&quot;authModule&quot;: &quot;<em>legacyEEITTAuth</em>&quot;</pre></td></tr><tr><td colspan="1" class="confluenceTd"><strong>regimeId</strong></td><td colspan="1" class="confluenceTd"><p>The two-character code for the regime that this form relates to.</p><p>The tax registration number (XRef) entered by the user will be checked to ensure it contains this code in the 3rd and 4th digits.</p></td><td colspan="1" class="confluenceTd">M</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><pre>&quot;regimeID&quot;: &quot;IP&quot;</pre></td></tr></tbody></table></div><p><span><br/></span></p><h2 id="id-05.GformsSpecification-FormDestinationConfiguration">Form Destination Configuration</h2><p>The form template JSON contains details of where to submit forms of that type, in the <em>destination</em> section.  Each destination has its own configuration options which are listed below:</p><h3 id="id-05.GformsSpecification-DMSDestinationConfiguration">DMS Destination Configuration</h3><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 30.5712%;"><colgroup><col style="width: 41.7994%;"/><col style="width: 58.1068%;"/></colgroup><tbody><tr><th class="confluenceTh">Destination ID</th><td class="confluenceTd">hmrcDMS</td></tr><tr><th colspan="1" class="confluenceTh">Config object name</th><td colspan="1" class="confluenceTd">hmrcDMSConfig</td></tr></tbody></table></div><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 95.9196%;"><colgroup><col style="width: 9.41261%;"/><col style="width: 47.4205%;"/><col style="width: 7.98284%;"/><col style="width: 14.2381%;"/><col style="width: 20.7316%;"/></colgroup><tbody><tr><th class="confluenceTh">Property ID</th><th class="confluenceTh">Description</th><th colspan="1" class="confluenceTh"><p>(M)andatory or</p><p>(O)ptional</p></th><th class="confluenceTh"><p>Default value where Optional</p></th><th colspan="1" class="confluenceTh">Example</th></tr><tr><td colspan="1" class="confluenceTd"><p><strong>customerId</strong></p></td><td colspan="1" class="confluenceTd"><p>Used to populate the customerId field in the metadata of the DMS package.</p></td><td colspan="1" class="confluenceTd">M</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><pre> </pre></td></tr><tr><td colspan="1" class="confluenceTd"><p><strong>classificationType</strong></p></td><td colspan="1" class="confluenceTd"><p><span>Used to populate the classificationType</span> field in the metadata of the DMS package.</p></td><td colspan="1" class="confluenceTd">M</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd"><p><strong>businessArea</strong></p></td><td colspan="1" class="confluenceTd"><span>Used to populate the businessArea field in the metadata of the DMS package.</span></td><td colspan="1" class="confluenceTd">M</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"> </td></tr></tbody></table></div><h3 id="id-05.GformsSpecification-DESDestinationConfiguration">DES Destination Configuration</h3><p>TBC</p><h3 id="id-05.GformsSpecification-SubmittingtoEmail">Submitting to Email</h3><p>See <a href="https://confluence.tools.tax.service.gov.uk/display/TEC/2017/02/08/Sending+emails+on+MDTP">Sending emails on MDTP</a> and <a href="https://github.tools.tax.service.gov.uk/HMRC/email/blob/master/API.md#post-domainemail" class="external-link" rel="nofollow">the email service in github</a> for details on how we send emails on MDTP.  The HMRC email service does not support attachments, therefore it is not possible to attach the form data itself (as PDF or anything else) to the email.  This destination should therefore be considered more as a means of notifying the user that submission has taken place, and should therefore be provided alongside another destination configuration such as hmrcDMS or hmrcDES.</p><p> </p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 30.5712%;"><colgroup><col style="width: 41.7994%;"/><col style="width: 58.1068%;"/></colgroup><tbody><tr><th class="confluenceTh">Destination ID</th><td class="confluenceTd">hmrcEmail</td></tr><tr><th colspan="1" class="confluenceTh">Config object name</th><td colspan="1" class="confluenceTd">hmrcEmailConfig</td></tr></tbody></table></div><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 95.9091%;"><colgroup><col style="width: 9.36574%;"/><col style="width: 47.54%;"/><col style="width: 7.94309%;"/><col style="width: 14.2857%;"/><col style="width: 20.8654%;"/></colgroup><tbody><tr><th class="confluenceTh">Property ID</th><th class="confluenceTh">Description</th><th colspan="1" class="confluenceTh"><p>(M)andatory or</p><p>(O)ptional</p></th><th class="confluenceTh"><p>Default value where Optional</p></th><th colspan="1" class="confluenceTh">Example</th></tr><tr><td colspan="1" class="confluenceTd"><p><strong>to</strong></p></td><td colspan="1" class="confluenceTd"><p>The target email address. Can be an <a href="Gforms-Expressions_83460621.html">expression</a> to reference user or form data dynamically.</p></td><td colspan="1" class="confluenceTd">M</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><pre><span class="pl-pds">&quot;</span>to<span class="pl-pds">&quot;</span>: &quot;$declarationEmailAddr&quot;</pre></td></tr><tr><td colspan="1" class="confluenceTd"><p><strong>templateId</strong></p></td><td colspan="1" class="confluenceTd"><p>The ID of the HMRC email template to use. This contains the email content. See the <a href="https://github.com/hmrc/hmrc-email-renderer/blob/master/CONTRIBUTING.md" class="external-link" rel="nofollow">email templating service contribution guidelines</a> for details of how to create an email template.</p></td><td colspan="1" class="confluenceTd">M</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><pre><span class="pl-s" style="color: rgb(24,54,145);"><span class="pl-pds">&quot;</span>templateId<span class="pl-pds">&quot;</span></span>: <span class="pl-s" style="color: rgb(24,54,145);"><span class="pl-pds">&quot;</span>my-lovely-template<span class="pl-pds">&quot;</span></span></pre></td></tr><tr><td colspan="1" class="confluenceTd"><p><strong>params</strong></p></td><td colspan="1" class="confluenceTd">An array of parameter name-value pairs. Parameters are used in the email template, therefore parameter values must be provided here for each parameter name referenced in the template with the given ID (above). Parameter values can be <a href="Gforms-Expressions_83460621.html">expressions</a>.</td><td colspan="1" class="confluenceTd">O</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><pre><span class="pl-s" style="color: rgb(24,54,145);"><span class="pl-pds">&quot;params&quot;: [</span></span></pre><pre><span class="pl-s" style="color: rgb(24,54,145);"><span class="pl-pds"> &quot;contactName&quot;: &quot;</span></span><span class="pl-s" style="color: rgb(24,54,145);">$firstName $surname<span class="pl-pds">&quot;</span></span></pre><pre> &quot;reference&quot;: &quot;$filingReference&quot;</pre><p>]</p></td></tr></tbody></table></div><h2 id="id-05.GformsSpecification-SectionProperties"><br/>Section Properties</h2><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 100.0%;"><colgroup><col style="width: 7.44741%;"/><col style="width: 37.6919%;"/><col style="width: 7.22001%;"/><col style="width: 18.4196%;"/><col style="width: 29.2211%;"/></colgroup><tbody><tr><th class="confluenceTh">Property ID</th><th class="confluenceTh">Description</th><th colspan="1" class="confluenceTh"><p>(M)andatory or</p><p>(O)ptional</p></th><th class="confluenceTh"><p>Default value where Optional</p></th><th colspan="1" class="confluenceTh">Example</th></tr><tr><td class="confluenceTd"><p><strong>title</strong></p></td><td class="confluenceTd"><p>The title to display for this section. Note this can include expressions.</p><p>If <em>repeats </em>is specified then this can include the expression $n which will evaluate at run-time to the 1-based index of the current repeat. For example <em>title=&quot;Details for premise $n&quot;</em> would be rendered as &quot;Details for premise 1&quot; for the first repetition, &quot;Details for premise 2&quot; for the second, and so on.</p></td><td colspan="1" class="confluenceTd">M</td><td class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><pre>&quot;Premises details&quot;</pre><pre>&quot;Details for premise $n&quot;</pre></td></tr><tr><td colspan="1" class="confluenceTd"><strong>description</strong></td><td colspan="1" class="confluenceTd">The description to display for this section</td><td colspan="1" class="confluenceTd">O</td><td colspan="1" class="confluenceTd">&lt;empty&gt;</td><td colspan="1" class="confluenceTd"><pre>&quot;Tell us about all premises from which</pre><pre>gas is set aside or sent out as road fuel&quot;</pre></td></tr><tr><td colspan="1" class="confluenceTd"><strong>shortName</strong></td><td colspan="1" class="confluenceTd">Optionally, a short name to use for this section. Typically used when summarising back the section contents to the user, when <em>title </em>provided is instructional in nature and therefore unsuitable for playback. Where this is not set, a UI should fallback to using the <em>title</em>.</td><td colspan="1" class="confluenceTd">O</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><pre>&quot;title&quot;:&quot;Please enter your contact details&quot;</pre><pre>&quot;shortName&quot;:&quot;Contact details&quot;</pre></td></tr><tr><td colspan="1" class="confluenceTd"><strong>includeIf</strong></td><td colspan="1" class="confluenceTd"><p>If this option is provided then this section should only be included on a form if the given expression evaluates to true. See also the includeIf option for individual components (fields).</p><p>For API consumers, if this evaluates to false and yet a value for any field in the section is given, the form should fail validation.</p><p>For UI consumers, if this evaluates to false the section should not be presented to the user.</p><p>This must be a predicate i.e. provide an expression that evaluates to true or false. If it does not evaluate to either true or false, the expression is invalid and the default (true) should be assumed.</p></td><td colspan="1" class="confluenceTd">O</td><td colspan="1" class="confluenceTd"><p>true</p><p>(i.e. the field is always included in a form of this type)</p></td><td colspan="1" class="confluenceTd"><pre>&quot;${user.affinityGroup = 'AGENT'}&quot;</pre><pre>&quot;${isOrgOver1000EmployeesChoice = 'yes'}&quot;</pre><pre>&quot;${reclaimValue &gt; 1000000}&quot;</pre></td></tr><tr><td colspan="1" class="confluenceTd"><strong>repeatsMax</strong></td><td colspan="1" class="confluenceTd">The maximum number of repeating groups permitted on the form. Indicates that this group is a <strong>repeating group</strong>. Can be set to an expression. If this is set, then the IDs of all fields inside the group must contain <em>$n</em>.</td><td colspan="1" class="confluenceTd">O</td><td colspan="1" class="confluenceTd"> 1</td><td colspan="1" class="confluenceTd"><pre>&quot;5&quot;</pre><pre>&quot;$numPremises&quot;</pre></td></tr><tr><td colspan="1" class="confluenceTd"><strong>repeatsMin</strong></td><td colspan="1" class="confluenceTd">If <em>repeatsMax </em>is set, <em>repeatsMin</em> can optionally also be set to specify the minimum number of repeats of the section required. Defaults to 1. Can be set using an expression. Cannot be set unless repeatsMax is also set. Note: setting this to 0 makes the repeating section optional. Setting this to the same value as <em>repeats</em> requires the user to complete a fixed number of repeats.</td><td colspan="1" class="confluenceTd"><p>O</p><p>(not valid unless <em>repeats </em>is set)</p></td><td colspan="1" class="confluenceTd"> 1</td><td colspan="1" class="confluenceTd"><pre>&quot;5&quot;</pre><pre>&quot;$numPremises&quot;</pre></td></tr><tr><td colspan="1" class="confluenceTd"><strong>validators</strong></td><td colspan="1" class="confluenceTd"><p>Optionally, a list of <a href="Gforms-Validators_85406649.html">gforms validators</a> to execute when checking data submitted for this section by the user. <span>Validators are used to perform validation that requires coded business rules and/or API call-outs.</span></p><p>If provided, each validator is executed in turn. All validators are executed and error messages from each are collated.</p><p>Validators are for validation that requires integration with other systems. For basic field-level validation and conditional cross-field validation, use <a href="Gforms-Text-Component-Formats_82128359.html">field formats</a> and the <strong>validIf</strong> property available on every field.</p></td><td colspan="1" class="confluenceTd">O</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><div class="content-wrapper"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">&quot;validators&quot;: [
  {
    &quot;validatorName&quot;: &quot;hmrcUTRPostcodeCheck&quot;, 
    &quot;errorMessage&quot;: &quot;The UTR could not be found
        or the postcode did not match. | &lt;Welsh...&gt;&quot;
    &quot;parameters&quot;: [
        &quot;utr&quot;: &quot;$utrToCheck&quot;, 
        &quot;postcode&quot;: &quot;$postcodeToCheck&quot;, 
    ]
  },
  {
    &quot;validatorName&quot;: &quot;validator2...&quot;,
    ...
  }
]</pre>
</div></div></div></td></tr><tr><td colspan="1" class="confluenceTd"><strong>fields</strong></td><td colspan="1" class="confluenceTd"><p>The list of fields in this section.</p><p>Note each field is a form component from the <a href="Gforms-Field-Components_82124112.html">component catalogue</a>.</p></td><td colspan="1" class="confluenceTd">M</td><td colspan="1" class="confluenceTd">-</td><td colspan="1" class="confluenceTd"><div class="content-wrapper"><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: js; gutter: false; theme: Confluence" data-theme="Confluence">[
	{ &lt;field 1 JSON&gt; },
	{ &lt;field 2 JSON&gt; },
	{ &lt;field n JSON&gt; }
]</pre>
</div></div></div></td></tr></tbody></table></div><h2 id="id-05.GformsSpecification-FieldProperties">Field Properties</h2><p>Each field in the form template JSON is a gforms form component as defined in the <a href="Gforms-Field-Components_82124112.html">component catalogue</a>.</p><h1 id="id-05.GformsSpecification-Examples">Examples</h1><h3 id="id-05.GformsSpecification-Example#1-E930A-Excisedutyongasforuseasroadfuelform:">Example #1 - E930A - Excise duty on gas for use as road fuel form:</h3><p><span><strong>UX prototype: </strong><a href="https://eeitt-ce930a.herokuapp.com" class="external-link" rel="nofollow">https://eeitt-ce930a.herokuapp.com</a>   (<em>user</em>=eeitt-ce930a; <em>password</em>=password)</span></p><p><span><strong>gforms defition</strong>: </span><a href="https://github.com/nathdolan/better-forms/blob/master/api/gf-formtemplate-api/examples/gf-formtemplate-e930a.json" class="external-link" rel="nofollow">E930A gforms template JSON</a></p><h3 id="id-05.GformsSpecification-Example#2-IPT100-Insurancepremiumtaxform:">Example #2 - IPT100 - Insurance premium tax form:</h3><p><strong>UX prototype: </strong><a href="https://drive.google.com/a/hmrc.gov.uk/file/d/0B02IZFfTv8DoZEp0S1Y3Sk5waGM/view?usp=sharing" class="external-link" rel="nofollow">PDF representation</a></p><p><strong>gforms definition</strong>: <a href="https://github.com/nathdolan/better-forms/blob/master/api/gf-formtemplate-api/examples/gf-formtemplate-ipt100.json" class="external-link" rel="nofollow">IPT100 gforms template JSON</a></p><p> </p><h1 id="id-05.GformsSpecification-FormSpecificationDesignPrinciples">Form Specification Design Principles</h1><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 99.9372%;"><colgroup><col style="width: 4.57404%;"/><col style="width: 10.4059%;"/><col style="width: 84.9057%;"/></colgroup><tbody><tr><th class="confluenceTh">ID</th><th colspan="1" class="confluenceTh">Topic</th><th class="confluenceTh">Principle</th></tr><tr><td colspan="1" class="confluenceTd">FDP.G.1</td><td colspan="1" class="confluenceTd">General</td><td colspan="1" class="confluenceTd">The overriding design driver is Simplicity.</td></tr><tr><td class="confluenceTd">FDP.G.2</td><td colspan="1" class="confluenceTd">General</td><td class="confluenceTd">Form data for one form is captured in &quot;Form JSON&quot;. The structure of each form type and version is defined in &quot;Form Template JSON&quot;. Form JSON references the ID and version of the Form Template for the form data being submitted.</td></tr><tr><td class="confluenceTd">FDP.G.3</td><td colspan="1" class="confluenceTd">General</td><td class="confluenceTd">All JSON used has a JSON schema. However the JSON schema should favour being loose above attempting to capture complex rules. i.e. JSON schema compliance is simply to validate basic structure and the gforms engine would need to parse the JSON in order to establish full compliance with the gforms specification.</td></tr><tr><td class="confluenceTd">FDP.G.4</td><td colspan="1" class="confluenceTd">General</td><td class="confluenceTd">The form template JSON definition should provide (a) everything that someone would need to know to complete and submit a form of that type, and (b) everything the system needs to know to render a UI or present an API to capture data for it, validate it, and submit it.</td></tr><tr><td class="confluenceTd">FDP.G.5</td><td colspan="1" class="confluenceTd">General</td><td class="confluenceTd">The final display text is entered into the JSON value for display fields (e.g. Title). Mapping of resource keys to separate files that contain the display text is not permitted as it breaks the principle above.</td></tr><tr><td class="confluenceTd">FDP.G.6</td><td colspan="1" class="confluenceTd">General</td><td class="confluenceTd">Welsh display text can be included alongside English for any field value by using a pipe separator i.e. &quot;title&quot;: &quot;English form title | Teitl Ffurflen Saesneg&quot;. Pipes themselves are not permitted in display text.</td></tr><tr><th colspan="1" class="confluenceTh"> </th><th colspan="1" class="confluenceTh"> </th><th colspan="1" class="confluenceTh"> </th></tr><tr><td class="confluenceTd">FDP.S.1</td><td colspan="1" class="confluenceTd">Sections and Fields</td><td class="confluenceTd"><p>Sections and fields are captured as ordered arrays in the JSON and should be rendered by a UI in the specified order.</p></td></tr><tr><td colspan="1" class="confluenceTd">FDP.S.2</td><td colspan="1" class="confluenceTd">Sections and Fields</td><td colspan="1" class="confluenceTd">Apart from ordering, all UI layout and look-and-feel aspects should be controlled by the UI rendering engine and will depend on the rendering mode chosen by the user.</td></tr><tr><td colspan="1" class="confluenceTd">FDP.S.4</td><td colspan="1" class="confluenceTd">Sections and Fields</td><td colspan="1" class="confluenceTd">Field IDs are unique to their form. All IDs used should be in camelCase and should be descriptive and favour clarity over brevity e.g. &quot;telephoneNumber&quot; not &quot;telNo&quot;. As a general rule for simplicity field ID should be field name converted to camel case and any tool used to create form JSON should use this convention.</td></tr><tr><th colspan="1" class="confluenceTh"> </th><th colspan="1" class="confluenceTh"> </th><th colspan="1" class="confluenceTh"> </th></tr></tbody></table></div>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Dec 04, 2017 20:57</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
